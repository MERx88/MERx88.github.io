---
layout: default
title: Ethereum
parent: Blockchain
nav_order: 1
---

# Ethereum

이더리움 알트코인의 선두주자... 하지만 내 생각에는 영원할거 같지 않은 하지만 몇년은 비트코인의 다음을 지킬 녀석

# Ethereum Mechanism

이더리움이 머지이후로 모놀리틱에서 모듈러 블록체인으로 바뀌었는데 그에 대해 좀 쉽게 기록하고자 한다.

모듈러 블록체인을 간단히 말하자면 기능에 따라 나눠 확장성을 높힌 블록체인이라고 볼수있다.

이더리움은 합의(컨센서스), 실행(익스큐션)으로 나누었고 이를 통해 합의는 좀더 가볍게해서 모두가 참여가능하게 만들고 이를 통해 탈중앙성을 높이고자 했다.

///그림

위 그림은 공부하면서 작성했던 구조도 인데 앞으로 다룰 각 레이어에서 기능들이기도 하다

우선 합의레이어 부터 하나씩 살펴보자

## 합의레이어 (Consensus Layer)

합의레이어라고 부르는 것 중 가장 중요한 건 사실 비콘노드라는 녀석인데 이 친구가 중요한 이유는 블록체인에서 핵심인 **동일한 상태** 에 이를수있도록 도와주기 때문이다.

어떤 악의적인 공격자가 공격해도 자신이 가진 규칙에 따라 쳐낼건 쳐내고 받아들일건 받아들인다는 이야기이다. 그리고 아까 합의레이어에 있던 기능들 대부분이 이 규칙을 컴퓨터 코드로 작성해놓은 것이다.

//그림

그리고 이 규칙을 일정한 간격의 시간으로 체크하는데 이 일정한 시간을 부르는 단위가 에포크와 슬롯이다. 1슬롯은 12초 1에포크는 32 슬롯이 지나면 1에포크로 시간으로 따지면 6.4분이다. 또한 1슬롯에 1 블록이 일반적으로 만들어진다.

앞으로 슬롯과 에포크라는 단어가 계속 나오는데 그냥 어느정도 주기로 무슨일이 일어나는구나로 보면 좋을거 같다(실생활과 비교하면 하루단위로는 이런일이 매주 단위로는 이런일이? 일어난다고 보면 좋을거 같다.)

### 제안자와 검증자 구성하기

슬롯과 에포크 말고도 짚고 넘어가야하는 개념이 있는데 제안자(proposer)와 검증자 (valodator) 를 알고 넘어가야한다.

```
100명의 사람이 모두 같은 일을 하고 있고 같은 양의 일을 한다.그리고 100명은 하루 있었던 작업들을 가지고 회사보고서를 작성한다고 생각해보자 또한 이보고서는 사내규정에 맞게 작성해야한다. 그렇다면 100명 모두가 보고서를 작성해야 할필요가 있을까? 100명중 한사람이 작성하고 나머지가 검토해서 복사해서 내는것이 효율적이지 않을까?
```

이더리움은 블록을 만들고 제안하는 제안자가 있고 이 제안되어진 블록을 검토하는 검증자가 있다. 모두가 비슷한 블록을 만드는데 이를 모두가 제안한다면 같은 상태의 블록을 가지기 어려울것이다. 그렇기 때문에 한사람이 제안하면 검증하고 이를 현재 블록체인의 블록으로 인정하게 되는것이다.

그러면 탈중앙화 되어있는 시스템에서 제안자는 어떻게 어떤 주기로 정해지는 걸까 이에 따른 검증자또한 어떻게 결정되는 걸까?

제안자는 블록이 만들어지는 주기인 슬롯당 하나씩 배치가 되고 검증자는 최소 128개의 검증자를 묶어 위원회 단위로 배치를 한다.

그리고 에포크당 이걸 RANDAO를 통해 무작위하게 배치를 하게되고 역할은 절대 겹치지 않게 한다. 즉, 제안자는 한에포크내에서 한번더 제안자를 할수 없으며 내가 에포크내에 한 슬롯의 검증자를 했다면 다른 슬롯의 검증자는 할수없다는 의미이다.

**RANDAO**

앞에서 잠깐 무작위에 대한 이야기를 했는데 무작위성은 사실 블록체인 전반에 걸쳐 중요한 문제이다. 예측가능하다는 것은 공격 받기 좋다는 의미인데 보안이 중요한 블록체인에서는 예민한 문제이다. 하지만 컴퓨터는 무작위성을 가진 **난수**를 만드는건 불가능하다. (컴퓨터가 그냥 뱉어내는 난수들은 이름만 난수고 예측가능하다는 뜻!) 난수를 만들기 위해서는 시드라고하는 초기값이 필요하다
